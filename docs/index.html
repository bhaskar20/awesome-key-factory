<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Query Key Factory - Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">React Query Key Factory</h1>
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <nav class="nav">
                <ul class="nav-list">
                    <li><a href="#introduction" class="nav-link">Introduction</a></li>
                    <li><a href="#installation" class="nav-link">Installation</a></li>
                    <li><a href="#quick-start" class="nav-link">Quick Start</a></li>
                    <li><a href="#core-concepts" class="nav-link">Core Concepts</a></li>
                    <li><a href="#usage-guide" class="nav-link">Usage Guide</a></li>
                    <li><a href="#api-reference" class="nav-link">API Reference</a></li>
                    <li><a href="#examples" class="nav-link">Examples</a></li>
                    <li><a href="#typescript" class="nav-link">TypeScript Support</a></li>
                    <li><a href="#best-practices" class="nav-link">Best Practices</a></li>
                    <li><a href="#faq" class="nav-link">FAQ</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Introduction -->
            <section id="introduction" class="section">
                <h1>React Query Key Factory</h1>
                <p class="lead">A type-safe utility library for managing React Query keys in TypeScript applications.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <h3>Type Safe</h3>
                        <p>Get compile-time errors for typos and incorrect key usage</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üí°</div>
                        <h3>Autocomplete</h3>
                        <p>Full IDE support with intelligent suggestions</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üìÅ</div>
                        <h3>Organized</h3>
                        <p>Hierarchical structure keeps your keys organized</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3>Flexible</h3>
                        <p>Support for nested structures, parameters, and array shorthand</p>
                    </div>
                </div>
            </section>

            <!-- Installation -->
            <section id="installation" class="section">
                <h2>Installation</h2>
                <p>Install the package using your preferred package manager:</p>
                
                <div class="code-tabs">
                    <div class="code-tab active" data-tab="yarn">Yarn</div>
                    <div class="code-tab" data-tab="npm">npm</div>
                </div>
                
                <div class="code-block-container">
                    <pre class="code-block" id="yarn-code"><code>yarn add react-query-key-factory</code></pre>
                    <pre class="code-block hidden" id="npm-code"><code>npm install react-query-key-factory</code></pre>
                </div>

                <div class="info-box">
                    <strong>Peer Dependencies:</strong> This library requires TypeScript version 4.0.0 or higher.
                </div>
            </section>

            <!-- Quick Start -->
            <section id="quick-start" class="section">
                <h2>Quick Start</h2>
                <p>Get started with a basic example:</p>
                
                <pre class="code-block"><code>import { createKeyFactory } from 'react-query-key-factory';

const queryKeys = createKeyFactory('app', {
  users: {
    all: () => [],
    detail: (params: { id: string }) => [params.id],
  },
  posts: {
    all: () => [],
    detail: (params: { id: string }) => [params.id],
  },
});

// Usage in React Query
useQuery({
  queryKey: queryKeys.users.detail({ id: '123' }),
  queryFn: () => fetchUser('123'),
});</code></pre>
            </section>

            <!-- Core Concepts -->
            <section id="core-concepts" class="section">
                <h2>Core Concepts</h2>
                
                <div class="concept-card">
                    <h3>1. Base Key</h3>
                    <p>The base key is the root identifier for all keys generated by the factory. It's the first element in every generated key array.</p>
                    <pre class="code-block"><code>const keys = createKeyFactory('myApp', { ... });
// All keys will start with 'myApp'</code></pre>
                </div>

                <div class="concept-card">
                    <h3>2. Schema Structure</h3>
                    <p>The schema defines the hierarchical structure of your keys. It can contain:</p>
                    <ul>
                        <li><strong>Functions:</strong> Generate dynamic keys based on parameters</li>
                        <li><strong>Nested Objects:</strong> Create hierarchical key structures</li>
                        <li><strong>Arrays:</strong> Shorthand for static key lists</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h3>3. Key Generation</h3>
                    <p>Keys are generated as arrays of strings, following the pattern:</p>
                    <pre class="code-block"><code>[baseKey, ...path, ...additionalKeys]</code></pre>
                </div>
            </section>

            <!-- Usage Guide -->
            <section id="usage-guide" class="section">
                <h2>Usage Guide</h2>

                <h3>Basic Usage</h3>
                
                <h4>Simple Key with Function</h4>
                <pre class="code-block"><code>const keys = createKeyFactory('base', {
  items: (params: {}) => ['list'],
});

keys.items({}) // => ['base', 'items', 'list']</code></pre>

                <h4>Nested Structure</h4>
                <pre class="code-block"><code>const keys = createKeyFactory('app', {
  users: {
    all: () => [],
    detail: (params: { id: string }) => [params.id],
  },
});

keys.users.all({}) // => ['app', 'users', 'all']
keys.users.detail({ id: '123' }) // => ['app', 'users', 'detail', '123']
keys.users() // => ['app', 'users'] (access intermediate level)</code></pre>

                <h4>Array Shorthand</h4>
                <pre class="code-block"><code>const keys = createKeyFactory('shop', {
  products: {
    list: ['all'], // Equivalent to () => ['all']
    featured: ['featured', 'items'],
  },
});

keys.products.list({}) // => ['shop', 'products', 'list', 'all']
keys.products.featured({}) // => ['shop', 'products', 'featured', 'featured', 'items']</code></pre>

                <h3>Advanced Patterns</h3>

                <h4>Deep Nesting</h4>
                <pre class="code-block"><code>const keys = createKeyFactory('api', {
  v1: {
    users: {
      posts: {
        comments: (params: { postId: string }) => [params.postId],
      },
    },
  },
});

keys.v1.users.posts.comments({ postId: '123' })
// => ['api', 'v1', 'users', 'posts', 'comments', '123']

// Access any intermediate level
keys.v1.users.posts() // => ['api', 'v1', 'users', 'posts']
keys.v1.users() // => ['api', 'v1', 'users']
keys.v1() // => ['api', 'v1']</code></pre>

                <h4>Direct Access to Nested Keys</h4>
                <pre class="code-block"><code>const keys = createKeyFactory('app', {
  users: {
    posts: {
      comments: ['all'],
    },
  },
});

// Both of these work:
keys.users.posts.comments({}) // => ['app', 'users', 'posts', 'comments', 'all']
keys.comments({}) // => ['app', 'users', 'posts', 'comments', 'all'] (direct access)</code></pre>
            </section>

            <!-- API Reference -->
            <section id="api-reference" class="section">
                <h2>API Reference</h2>
                
                <div class="api-card">
                    <h3><code>createKeyFactory&lt;BaseKey, Schema&gt;(baseKey, schema)</code></h3>
                    <p>Creates a type-safe key factory for React Query keys.</p>
                    
                    <h4>Parameters</h4>
                    <ul>
                        <li><strong><code>baseKey</code></strong> (<code>BaseKey extends string</code>): The base key that will be prepended to all generated keys</li>
                        <li><strong><code>schema</code></strong> (<code>Schema extends Record&lt;string, any&gt;</code>): An object defining the key structure</li>
                    </ul>
                    
                    <h4>Returns</h4>
                    <p>A factory object (<code>KeyFactory&lt;Schema, BaseKey&gt;</code>) where:</p>
                    <ul>
                        <li>Each leaf node (function or array) can be called to generate a key</li>
                        <li>Each intermediate node can be called to get its path</li>
                        <li>Nested keys can be accessed both through the full path and directly</li>
                    </ul>
                </div>
            </section>

            <!-- Examples -->
            <section id="examples" class="section">
                <h2>Examples</h2>

                <h3>Real-World React Query Setup</h3>
                <pre class="code-block"><code>import { createKeyFactory } from 'react-query-key-factory';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';

// Define your key factory
const queryKeys = createKeyFactory('app', {
  users: {
    all: () => [],
    lists: () => ['list'],
    detail: (params: { id: string }) => [params.id],
    posts: (params: { userId: string }) => [params.userId, 'posts'],
  },
  posts: {
    all: () => [],
    detail: (params: { id: string }) => [params.id],
    comments: (params: { postId: string }) => [params.postId, 'comments'],
  },
});

// Use in components
function UserDetail({ userId }: { userId: string }) {
  const { data, isLoading } = useQuery({
    queryKey: queryKeys.users.detail({ id: userId }),
    queryFn: () => fetchUser(userId),
  });

  const { data: posts } = useQuery({
    queryKey: queryKeys.users.posts({ userId }),
    queryFn: () => fetchUserPosts(userId),
  });

  // ...
}

// Use in mutations for invalidation
function useCreatePost() {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: createPost,
    onSuccess: (data) => {
      // Invalidate related queries
      queryClient.invalidateQueries({
        queryKey: queryKeys.posts.all({}),
      });
      queryClient.invalidateQueries({
        queryKey: queryKeys.users.posts({ userId: data.userId }),
      });
    },
  });
}</code></pre>

                <h3>E-commerce Application</h3>
                <pre class="code-block"><code>const queryKeys = createKeyFactory('shop', {
  products: {
    all: () => [],
    byCategory: (params: { category: string }) => [params.category],
    byId: (params: { id: string }) => [params.id],
    search: (params: { query: string }) => ['search', params.query],
  },
  cart: {
    items: () => [],
    count: () => ['count'],
  },
  orders: {
    all: () => [],
    byId: (params: { id: string }) => [params.id],
    byStatus: (params: { status: string }) => [params.status],
  },
});

// Usage
useQuery({
  queryKey: queryKeys.products.byCategory({ category: 'electronics' }),
  queryFn: () => fetchProductsByCategory('electronics'),
});</code></pre>
            </section>

            <!-- TypeScript Support -->
            <section id="typescript" class="section">
                <h2>TypeScript Support</h2>

                <h3>Type Inference</h3>
                <p>The library provides full type inference. You don't need to manually specify types:</p>
                <pre class="code-block"><code>const keys = createKeyFactory('app', {
  users: {
    detail: (params: { id: string }) => [params.id],
  },
});

// TypeScript knows the exact shape
keys.users.detail({ id: '123' }); // ‚úÖ Type-safe
keys.users.detail({ id: 123 }); // ‚ùå Type error: id must be string
keys.users.detail({ wrong: '123' }); // ‚ùå Type error: wrong property</code></pre>

                <h3>Custom Types</h3>
                <pre class="code-block"><code>interface UserParams {
  id: string;
  includePosts?: boolean;
}

const queryKeys = createKeyFactory('app', {
  users: {
    detail: (params: UserParams) => [
      params.id,
      ...(params.includePosts ? ['posts'] : []),
    ],
  },
});</code></pre>
            </section>

            <!-- Best Practices -->
            <section id="best-practices" class="section">
                <h2>Best Practices</h2>

                <div class="practice-card">
                    <h3>1. Centralize Key Definitions</h3>
                    <p>Create a single file for all your query keys:</p>
                    <pre class="code-block"><code>// src/lib/queryKeys.ts
import { createKeyFactory } from 'react-query-key-factory';

export const queryKeys = createKeyFactory('app', {
  // ... all your keys
});</code></pre>
                </div>

                <div class="practice-card">
                    <h3>2. Use Descriptive Names</h3>
                    <pre class="code-block"><code>// ‚úÖ Good
const keys = createKeyFactory('app', {
  users: {
    detail: (params: { id: string }) => [params.id],
  },
});

// ‚ùå Bad
const keys = createKeyFactory('a', {
  u: {
    d: (p: { i: string }) => [p.i],
  },
});</code></pre>
                </div>

                <div class="practice-card">
                    <h3>3. Group Related Keys</h3>
                    <pre class="code-block"><code>const queryKeys = createKeyFactory('app', {
  // Authentication
  auth: {
    currentUser: () => [],
    session: () => [],
  },
  // User management
  users: {
    all: () => [],
    detail: (params: { id: string }) => [params.id],
  },
  // Posts
  posts: {
    all: () => [],
    detail: (params: { id: string }) => [params.id],
  },
});</code></pre>
                </div>

                <div class="practice-card">
                    <h3>4. Leverage Intermediate Level Access</h3>
                    <pre class="code-block"><code>// Invalidate all user-related queries
queryClient.invalidateQueries({
  queryKey: queryKeys.users({}),
});

// Invalidate all post-related queries
queryClient.invalidateQueries({
  queryKey: queryKeys.posts({}),
});</code></pre>
                </div>
            </section>

            <!-- FAQ -->
            <section id="faq" class="section">
                <h2>FAQ</h2>

                <div class="faq-item">
                    <h3>Can I use this with React Query v4 and v5?</h3>
                    <p>Yes! This library works with all versions of React Query (TanStack Query) because it only generates key arrays, which is the standard format.</p>
                </div>

                <div class="faq-item">
                    <h3>How do I handle optional parameters?</h3>
                    <pre class="code-block"><code>const keys = createKeyFactory('app', {
  users: {
    search: (params: { query: string; page?: number }) => [
      params.query,
      ...(params.page ? [params.page.toString()] : []),
    ],
  },
});</code></pre>
                </div>

                <div class="faq-item">
                    <h3>Can I use this with other query libraries?</h3>
                    <p>Yes! While designed for React Query, this library generates standard key arrays that work with any library that uses array-based keys.</p>
                </div>

                <div class="faq-item">
                    <h3>What's the difference between array shorthand and functions?</h3>
                    <p>Array shorthand is syntactic sugar for functions that return static arrays:</p>
                    <pre class="code-block"><code>// These are equivalent:
list: ['all']
list: () => ['all']</code></pre>
                    <p>Use functions when you need dynamic values based on parameters.</p>
                </div>
            </section>

            <!-- Footer -->
            <footer class="footer">
                <p>MIT License | <a href="https://github.com" target="_blank">GitHub</a></p>
            </footer>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
